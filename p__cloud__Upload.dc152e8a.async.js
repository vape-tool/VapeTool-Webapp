(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"7zBA":function(e,t,a){"use strict";a.r(t);a("14J3");var n=a("BMrR"),r=(a("Znn+"),a("ZTPi")),i=(a("jCWc"),a("kPKH")),l=a("q1tI"),o=a.n(l),c=a("9kvl"),s=(a("IzEo"),a("bx4M")),u=(a("+L6B"),a("2/Rp")),m=(a("5NDa"),a("5rEg")),d=a("ODXe"),p=a("v83y"),h=a("71ry"),g=function(){var e=o.a.useState(p["EditorState"].createEmpty()),t=Object(d["a"])(e,2),a=t[0],n=t[1],r=Object(c["bb"])("uploadPost"),i=r.setTitle,l=r.setText,g=r.submitPost,f=Object(c["bb"])("@@initialState"),b=f.initialState,E=null===b||void 0===b?void 0:b.currentUser,v=function(e){return i(e.target.value)},w=function(e){return l(e.target.value)},y=function(){return g(E)};return o.a.createElement(s["a"],{style:{textAlign:"center"}},o.a.createElement(m["a"],{placeholder:Object(c["ab"])().formatMessage({id:"misc.title"}),onChange:v,style:{marginBottom:24}}),o.a.createElement(m["a"].TextArea,{allowClear:!0,placeholder:Object(c["ab"])().formatMessage({id:"misc.optionalText",defaultMessage:"Text (Optional)"}),onChange:w}),o.a.createElement(p["Editor"],{editorState:a,onChange:n}),o.a.createElement(u["default"],{type:"primary",onClick:y},o.a.createElement(c["i"],{id:"user.actions.publishPost",defaultMessage:"Publish post"})," ",o.a.createElement(h["ShareAltOutlined"],null)))},f=g,b=a("yihf"),E=a("sqCN"),v=a("mpQp"),w=a("Fvcw"),y=a("Uw7j"),x=function(){var e=o.a.useState(p["EditorState"].createEmpty()),t=Object(d["a"])(e,2),a=t[0],n=t[1],r=Object(c["bb"])("uploadLink"),i=r.setUrl,l=r.setText,g=r.submitLink,f=Object(c["bb"])("@@initialState"),b=f.initialState,E=null===b||void 0===b?void 0:b.currentUser,v=function(e){return i(e.target.value)},w=function(e){return l(e.target.value)},y=function(){return g(E)};return o.a.createElement(s["a"],{style:{textAlign:"center"}},o.a.createElement(m["a"],{placeholder:Object(c["ab"])().formatMessage({id:"misc.url"}),onChange:v,style:{marginBottom:24}}),o.a.createElement(m["a"].TextArea,{allowClear:!0,placeholder:Object(c["ab"])().formatMessage({id:"misc.optionalText",defaultMessage:"Text (Optional)"}),onChange:w}),o.a.createElement(p["Editor"],{editorState:a,onChange:n}),o.a.createElement(u["default"],{type:"primary",onClick:y},o.a.createElement(c["i"],{id:"user.actions.publishLink",defaultMessage:"Publish link"})," ",o.a.createElement(h["ShareAltOutlined"],null)))},C=x,k=function(){var e=Object(c["bb"])("upload"),t=e.currentTab,a=e.setTab,l=function(e){return a(E["a"][e])};return o.a.createElement(n["a"],null,o.a.createElement(i["a"],{xs:0,md:4,lg:6,xl:8}),o.a.createElement(i["a"],{xs:24,md:16,lg:14,xl:10},o.a.createElement(r["a"],{onChange:l,type:"card",activeKey:t},o.a.createElement(r["a"].TabPane,{tab:o.a.createElement("span",null,o.a.createElement(v["a"],null),o.a.createElement(c["i"],{id:"user.photo",defaultMessage:"Photo"})),key:E["a"].PHOTO},o.a.createElement(b["default"],null)),o.a.createElement(r["a"].TabPane,{tab:o.a.createElement("span",null,o.a.createElement(w["a"],null),o.a.createElement(c["i"],{id:"user.post",defaultMessage:"Post"})),key:E["a"].POST},o.a.createElement(f,null)),o.a.createElement(r["a"].TabPane,{tab:o.a.createElement("span",null,o.a.createElement(y["a"],null),o.a.createElement(c["i"],{id:"user.link",defaultMessage:"Link"})),key:E["a"].LINK},o.a.createElement(C,null)))),o.a.createElement(i["a"],{xs:0,md:4,lg:6,xl:8}))};t["default"]=k},oVF2:function(e,t,a){"use strict";a("IzEo");var n=a("bx4M"),r=(a("+L6B"),a("2/Rp")),i=(a("tU7J"),a("wFql")),l=a("o0o1"),o=a.n(l),c=a("HaE+"),s=a("1OyB"),u=a("vuIU"),m=a("Ji7U"),d=a("LK+K"),p=(a("miYZ"),a("tsqr")),h=(a("DZo9"),a("8z0m")),g=a("q1tI"),f=a.n(g),b=a("qQNu"),E=a.n(b),v=a("LtfV"),w=a("ycIM"),y=a("X72a"),x=(a("hzVQ"),a("9kvl")),C=h["a"].Dragger;function k(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||p["a"].error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<20;return a||p["a"].error("Image must smaller than 20MB!"),t&&a}function O(e){return new Promise((function(t,a){if(!e.originFileObj)return a(new Error("Origin file object undefined"));var n=new FileReader;return n.readAsDataURL(e.originFileObj),n.onload=function(){"string"===typeof n.result?t(n.result):a(new Error("Can not process ArrayBuffer"))},n.onerror=function(e){return a(e)},n}))}var S="image/jpeg",j=.92,M=function(e){Object(m["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;Object(s["a"])(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),e.state={sourceImage:void 0,crop:void 0},e.imageRef=void 0,e.croppedFileUrl=void 0,e.onUploadChange=function(){var t=Object(c["a"])(o.a.mark((function t(a){var n,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=a.file.status,"uploading"!==n&&console.log(a.file,a.fileList),"done"!==n){t.next=10;break}return p["a"].success("".concat(a.file.name," file uploaded successfully.")),t.next=6,O(a.file);case 6:r=t.sent,e.setState({sourceImage:r}),t.next=11;break;case 10:"error"===n&&p["a"].error("".concat(a.file.name," file upload failed."));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onImageLoaded=function(t){e.imageRef=t;var a=t.width>t.height?t.height:t.width,n=t.height>t.width?t.width:t.height,r=a===t.width?0:(t.width-a)/2,i=n===t.height?0:(t.height-n)/2,l={unit:"px",aspect:1,width:a,height:n,x:r,y:i};return e.onCropChange(l),e.makeClientCrop(l),!1},e.onCropChange=function(t){return e.setState({crop:t})},e.getCroppedImgUrl=function(t){var a=e.imageRef,n=document.createElement("canvas"),r=a.naturalWidth/a.width,i=a.naturalHeight/a.height;if(!t.width||!t.height)throw new Error("crop width ".concat(t.width," and crop height ").concat(t.height," must be positive number"));n.width=Math.ceil(t.width*r),n.height=Math.ceil(t.height*i),e.props.maxSize&&(n.width=Math.min(e.props.maxSize,n.width),n.height=Math.min(e.props.maxSize,n.height));var l=n.getContext("2d");if(!l)throw new Error("Could not retrieve context");if(void 0===t.x||void 0===t.y)throw new Error("crop x: ".concat(t.x," and crop height ").concat(t.y," must be positive number"));return l.drawImage(a,t.x*r,t.y*i,t.width*r,t.height*i,0,0,e.props.maxSize?Math.min(e.props.maxSize,t.width*r):t.width*r,e.props.maxSize?Math.min(e.props.maxSize,t.height*r):t.height*r),new Promise((function(a){n.toBlob((function(n){if(n){e.croppedFileUrl&&window.URL.revokeObjectURL(e.croppedFileUrl),e.croppedFileUrl=window.URL.createObjectURL(n);var l=t.width*r,o=t.height*i;a(Object.create({blob:n,width:l,height:o}))}else console.error("Canvas is empty")}),S,j)}))},e.makeClientCrop=function(){var t=Object(c["a"])(o.a.mark((function t(a){var n,r,i,l;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.imageRef&&a.width&&a.height)){t.next=8;break}return t.next=3,e.getCroppedImgUrl(a);case 3:n=t.sent,r=n.blob,i=n.width,l=n.height,e.props.onResizeImage&&e.props.onResizeImage(e.croppedFileUrl,r,i,l);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onResetSourceImage=function(){return e.setState({sourceImage:void 0})},e}return Object(u["a"])(a,[{key:"render",value:function(){var e=this.state,t=e.sourceImage,a=e.crop,l=this.props,o=l.uploadHintText,c=l.onConfirm;return f.a.createElement(f.a.Fragment,null,!t&&f.a.createElement(C,{name:"file",multiple:!1,onChange:this.onUploadChange,beforeUpload:k},f.a.createElement("p",{className:"ant-upload-drag-icon"},f.a.createElement(v["a"],null)),f.a.createElement("p",{className:"ant-upload-text"},f.a.createElement(x["i"],{id:"user.uploadPhoto.clickOrDrag",defaultMessage:"Click or drag file to this area to upload"})),f.a.createElement("p",{className:"ant-upload-hint"},o||f.a.createElement(i["default"],null,"Please upload only vape related photos. Breaking those rules will result in account suspension."))),t&&f.a.createElement(n["a"],{style:{textAlign:"center"}},f.a.createElement(E.a,{imageStyle:{maxHeight:"80vh"},src:t,crop:a,minHeight:100,minWidth:100,keepSelection:!0,onImageLoaded:this.onImageLoaded,onComplete:this.makeClientCrop,onChange:this.onCropChange}),f.a.createElement("div",{style:{marginTop:24}},f.a.createElement(r["default"],{type:"default",onClick:this.onResetSourceImage,style:{marginRight:12}},f.a.createElement(w["a"],null),f.a.createElement(x["i"],{id:"user.uploadPhoto.uploadAgain",defaultMessage:"Upload again"})),c&&f.a.createElement(r["default"],{type:"primary",onClick:c},f.a.createElement(x["i"],{id:"misc.actions.continue",defaultMessage:"Continue"}),f.a.createElement(y["a"],null)))))}}]),a}(f.a.PureComponent);t["a"]=M},yihf:function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),r=(a("+L6B"),a("2/Rp")),i=(a("5NDa"),a("5rEg")),l=a("ODXe"),o=a("q1tI"),c=a.n(o),s=a("9kvl"),u=a("oVF2"),m=a("ycIM"),d=a("aK7X"),p=function(){var e=Object(s["bb"])("uploadPhoto"),t=e.description,a=e.setDescription,p=e.submitPhoto,h=e.croppedImage,g=e.setCroppedImage,f=Object(o["useState"])(!0),b=Object(l["a"])(f,2),E=b[0],v=b[1],w=Object(s["bb"])("@@initialState"),y=w.initialState,x=null===y||void 0===y?void 0:y.currentUser,C=function(e,t,a,n){g({imageUrl:e,imageBlob:t,width:a,height:n})},k=function(){p(x)},O=function(e){a(e.target.value)},S=c.a.createElement(n["a"],{style:{textAlign:"center"}},c.a.createElement(i["a"],{style:{display:"block",outline:0,wordWrap:"break-word",boxSizing:"inherit",cursor:"text",minHeight:50,lineHeight:"37px",fontSize:28,fontFamily:"Proxima Nova Bold,Helvetica Neue,Helvetica,Arial,sans-serif",border:0},placeholder:Object(s["ab"])().formatMessage({id:"user.uploadPhoto.saySomething",defaultMessage:"Say something about this photo"}),onChange:O,value:t}),c.a.createElement("img",{alt:"Crop",width:"100%",style:{maxWidth:"100%"},src:h.imageUrl,onClick:function(){return v(!0)}}),c.a.createElement("div",{style:{marginTop:24}},c.a.createElement(r["default"],{type:"default",onClick:function(){return v(!0)},style:{marginRight:12}},c.a.createElement(m["a"],null),c.a.createElement(s["i"],{id:"user.uploadPhoto.cropAgain",defaultMessage:"Crop again"})),c.a.createElement(r["default"],{type:"primary",onClick:k},c.a.createElement(s["i"],{id:"user.actions.publishPost",defaultMessage:"Publish post"}),c.a.createElement(d["a"],null))));return c.a.createElement("div",{className:"App"},c.a.createElement("div",{style:{display:E?"block":"none"}},c.a.createElement(u["a"],{onResizeImage:C,onConfirm:function(){return v(!1)},maxSize:800})),!E&&S)};t["default"]=p}}]);